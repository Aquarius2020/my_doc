如今虚拟机的实现方式有两种, 基于栈的和基于寄存器的, 无论这两种方式实现机制如何，都要实现以下几点：

- 取指令，其中指令来源于内存
- 译码，决定指令类型（执行何种操作）。另外译码的过程要包括从内存中取操作数
- 执行。指令译码后，被虚拟机执行（其实最终都会借助于物理机资源）
- 存储计算结果



例如执行 `a=b+c`, 在基于栈的虚拟机上字节码指令如下所示：

```assembly
LOAD C
LOAD B
ADD 
STORE A
```

由于操作数都是隐式地，所以指令可以做的很短，一般都是一个或者两个字节。但是显而易见就是指令条数会显著增加。而基于寄存器虚拟机执行:

```assembly
load R1 1
load R2 1
add R1 R2 R3
```

基于寄存器的虚拟机或许都不需要这么麻烦, 可以认为有无限个寄存器,每个变量从加载就都在寄存器中,这样一条指令就行了

```assembly
add b c a
```



这样, 自己写的语言可以按照 c 语言原汁原味执行, 甚至 ,可以可以可以直接翻译成 c 语言:

先翻译成虚拟机指令, 虚拟机指令又对应着 c 语言, 不执行,直接输出就行了





https://blog.51cto.com/u_15767091/6867309