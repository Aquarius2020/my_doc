头插法性能肯定是更高的. 并且符合时间局部性原理.

为什么还要改成尾插法?

因为总有一些不合格的程序员将非线程安全的 hashmap 放在多线程环境使用.  一个线程在做插入,另外一个线程在做扩容, 此时,容易形参一个环. cpu 100%.

这种诡异的 bug 想想就非常难排查了.

为了排除这种不合格的程序员写的垃圾代码, 牺牲了一点性能.